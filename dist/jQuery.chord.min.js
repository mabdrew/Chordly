!function(a,b,c,d){"use strict";function e(b){var c={};return a.each(b,function(a,b){c[b]=a}),c}function f(b,c){this.$element=a(b),this.options=a.extend({},g,c),this.bufferTimeout=null,this.options.sequenceMap=a.chord.flattenSequenceMap(this.options.sequenceMap),this._expandBufferLength(),this.sequenceBuffer=[],this._init()}var g={captureShift:!1,captureAlt:!1,captureCtrl:!1,ignoreFormElements:!0,keyEvent:"keyup",maxBufferLength:5,clearBufferOnMatch:!0,sequenceMap:[],paused:!1,bufferTimeoutMs:0,greedyTimeoutMs:0},h=-1!==navigator.userAgent.indexOf("Opera")?"Opera":-1!==navigator.userAgent.indexOf("Firefox")?"Firefox":-1!==navigator.userAgent.indexOf("Chrome")?"Chrome":-1!==navigator.userAgent.indexOf("MSIE")?"IE":"Unknown",i={Shift:16,Control:17,Alt:19,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,Kpd0:"Opera"!==h?96:48,Kpd1:"Opera"!==h?97:49,Kpd2:"Opera"!==h?98:50,Kpd3:"Opera"!==h?99:51,Kpd4:"Opera"!==h?100:52,Kpd5:"Opera"!==h?101:53,Kpd6:"Opera"!==h?102:54,Kpd7:"Opera"!==h?103:55,Kpd8:"Opera"!==h?104:56,Kpd9:"Opera"!==h?105:57,KpdAstrik:"Opera"!==h?106:42,KpdPlus:"Opera"!==h?107:43,KpdDash:"Opera"!==h?109:45,KpdPeriod:"Opera"!==h?110:78,KpdForwardSlash:"Opera"!==h?111:47,KpdAlt5:12,KpdAltEnter:13,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,SemiColon:"Firefox"===h||"Opera"===h?59:186,Equals:"Firefox"===h||"Opera"===h?61:187,Comma:"Opera"===h?44:188,Dash:"Firefox"===h?109:"Opera"===h?45:189,Period:"Opera"===h?46:190,ForwardSlash:"Opera"===h?47:191,Tick:"Opera"===h?96:192,OpenBracket:"Opera"===h?91:219,BackSlash:"Opera"===h?92:220,CloseBracket:"Opera"===h?93:221,SingleQuote:"Opera"===h?39:222,BkSpace:8,Tab:9,Enter:13,Esc:27,Space:32,Insert:45,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,CapsLock:20,NumLock:144,ScrollLock:145,LeftArrow:37,UpArrow:38,RightArrow:39,DownArrow:40};a.chord={scanCodeMap:i,inverseScanCodeMap:e(i),makeSequencePart:function(a,b,c,e){return{keyCode:a,shift:b===d?null:b,alt:c===d?null:c,ctrl:e===d?null:e}},keysEqual:function(a,b){return!(a.keyCode!==b.keyCode||null!==b.shift&&a.shift!==b.shift||null!==b.alt&&a.alt!==b.alt||null!==b.ctrl&&a.ctrl!==b.ctrl)},literalStringToSequence:function(b){var c,d,e,f=[];for(b=b.toLowerCase(),e=0;e<b.length;e++){if(d=b.charAt(e),d>="a"&&"z">=d||d>="0"&&"9">=d)c=a.chord.scanCodeMap[d.toString().toUpperCase()];else{if(" "!==d)throw"Encountered unrecognized character '"+d+"' (char code:"+d.charCodeAt(0)+")  in literal string sequence '"+b+"' at index "+e+"; Literal string to a sequence must be alpha numeric or space.";c=a.chord.scanCodeMap.Space}f.push(a.chord.makeSequencePart(c))}return f},stringToSequence:function(b){for(var c=[],e=b.split(/\s+/),f=0;f<e.length;f++){var g,h=e[f],i=-1===h.indexOf("!shift")?-1===h.indexOf("shift")?null:!0:!1,j=-1===h.indexOf("!alt")?-1===h.indexOf("alt")?null:!0:!1,k=-1===h.indexOf("!ctrl")?-1===h.indexOf("ctrl")?null:!0:!1,l=h.replace(/^((!?shift\+)|(!?alt\+)|(!?ctrl\+))*/,"");if(-1!==l.indexOf("[")&&-1!==l.indexOf("]")){if(g=parseInt(l.substr(1,l.length-2),10),isNaN(g))throw"Encountered unrecognized keycode '"+l+"' in string sequence '"+b+"' at index "+f+".";if(0>g||g>255)throw"Encountered out of range keycode '"+l+"' in string sequence '"+b+"' at index "+f+". Keycode must be between 0 and 255."}else if(g=a.chord.scanCodeMap[l],g===d)throw"Encountered unrecognized sequence element '"+l+"' in string sequence '"+b+"' at index "+f+". See $.chord.scanCodeMap for valid sequence elements";c.push(a.chord.makeSequencePart(g,i,j,k))}return c},sequenceToString:function(b){var c=[];return a.each(b,function(b,e){var f=a.chord.inverseScanCodeMap[e.keyCode],g=(null===e.shift?"":(e.shift?"":"!")+"shift+")+(null===e.alt?"":(e.alt?"":"!")+"alt+")+(null===e.ctrl?"":(e.ctrl?"":"!")+"ctrl+")+(f===d?"["+e.keyCode+"]":f);c.push(g)}),c.join(" ")},flattenSequenceMap:function(b){var c=[];return a.each(b,function(b,d){var e;e=d.sequence.length>0&&d.sequence[0]instanceof Array?d.sequence:[d.sequence],a.each(e,function(a,b){var e={sequence:b,matched:d.matched,lookup:d.lookup};c.push(e)})}),c}},a.fn.chord=function(){var b=arguments[0],c=Array.prototype.slice.call(arguments,1,arguments.length);return this.each(function(){var d=a(this),e=d.data("chord"),g="object"==typeof b&&b;e||(e=new f(this,g),d.data("chord",e),d.addClass("chord")),"string"==typeof b&&e[b](c)})},f.prototype={constructor:f,_init:function(){function a(a){d&&-1!==["button","checkbox","color","date","datetime","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","textarea","time","url","week"].indexOf(a.target.type)||b._listen(a)}var b=this,c=this.options.keyEvent,d=this.options.ignoreFormElements;return this.$element.bind(c,a),this.$element},_listen:function(a){if(!this.options.paused){var b=this._pushSequencePartFromEvent(a);if(b)if(null!==this.greedyTimeout&&clearTimeout(this.greedyTimeout),this.options.greedyTimeoutMs>0){var c=this;this.greedyTimeout=setTimeout(function(){c.actOnBuffer(a)},this.options.greedyTimeoutMs)}else this.actOnBuffer(a)}},_pushSequencePartFromEvent:function(b){var c=b.which,d=a.chord.makeSequencePart(c,b.shiftKey,b.altKey,b.ctrlKey);return!this.options.captureShift&&c===a.chord.scanCodeMap.Shift||!this.options.captureAlt&&c===a.chord.scanCodeMap.Alt||!this.options.captureCtrl&&c===a.chord.scanCodeMap.Control?!1:(this._pushSequencePart(d),!0)},_pushSequencePart:function(a){if(this.sequenceBuffer.length>this.options.maxBufferLength-1&&this.sequenceBuffer.splice(0,1),this.sequenceBuffer.push(a),null!==this.bufferTimeout&&clearTimeout(this.bufferTimeout),this.options.bufferTimeoutMs>0){var b=this;this.bufferTimeout=setTimeout(function(){b.clearSequenceBuffer()},this.options.bufferTimeoutMs)}},_sequenceMatch:function(b){var c,d,e=b.length,f=this.sequenceBuffer.length;if(e>f)return!1;for(c=this.sequenceBuffer.slice(f-e),d=0;e>d;d++)if(!a.chord.keysEqual(c[d],b[d]))return!1;return!0},_expandBufferLength:function(){var b=0;a.each(this.options.sequenceMap,function(a,c){c.sequence.length>b&&(b=c.sequence.length)}),this.options.maxBufferLength<b&&(this.options.maxBufferLength=b)},clearSequenceBuffer:function(){this.sequenceBuffer=[]},actOnBuffer:function(b){var c=this,d=!1;a.each(this.options.sequenceMap,function(e,f){var g=f.sequence;if(c._sequenceMatch(g)){"function"==typeof f.matched&&f.matched.apply(b,[b]);var h=a.Event("chordMatch");h.originalEvent=b,h.lookup=f.lookup,h.sequence=g,h.sequenceString=a.chord.sequenceToString(g),c.$element.trigger(h),d=!0}}),d&&c.options.clearBufferOnMatch&&c.clearSequenceBuffer()},pause:function(){this.options.paused=!0},resume:function(){this.options.paused=!1},togglePause:function(){this.options.paused=!this.options.paused},destroy:function(){this.$element.unbind(this.keyEvent,this.eventCall),this.$element.removeClass("chord"),this.$element.removeData("chord")},bind:function(b){var c=this.options.sequenceMap,d=a.chord.flattenSequenceMap(b[0]instanceof Array?b[0]:[b[0]]);a.each(d,function(a,b){c.push(b)}),this._expandBufferLength()},bindLiteralSequence:function(b){this.bind([{sequence:a.chord.literalStringToSequence(b[0]),matched:"function"==typeof b[1]?b[1]:d,lookup:"string"==typeof b[1]?b[1]:b[2]}])},bindSequence:function(b){this.bind([{sequence:a.chord.stringToSequence(b[0]),matched:"function"==typeof b[1]?b[1]:d,lookup:"string"==typeof b[1]?b[1]:b[2]}])},unbind:function(b){for(var c=a.chord.sequenceToString(b[0]),d=this.options.sequenceMap.length-1;d>-1;d--)c===a.chord.sequenceToString(this.options.sequenceMap[d].sequence)&&this.options.sequenceMap.splice(d,1)},pushSequence:function(b){var c=this;a.each(b[0],function(a,b){c._pushSequencePart(b)})},pushSequenceAndAct:function(a){this.pushSequence(a),this.actOnBuffer()}}}(jQuery,window,document);
//# sourceMappingURL=jQuery.chord.min.js.map